var redis = require("redis"),
    listname      = process.argv[2];
    validLists    = ["watchlist", "emaillist", "slackloglist", "slackalertlist"];

// TODO: add/remove both use this same function, need to abstract out
// taken from http://stackoverflow.com/questions/784012/javascript-equivalent-of-phps-in-array on 20150518 @ 19:50 EST
function inArray (needle, haystack) {
	var length = haystack.length;
	for(var i = 0; i < length; i++) {
		if(haystack[i] == needle) return true;
	}
	return false;
};

function showlist (listname) {
	var client = redis.createClient();

	client.get (listname, function (err, reply) {
		if (reply != null) {
			var list = JSON.parse(reply.toString());
			
			for (i = 0; i < list.length; i++) {
				console.log (list[i]);
			}
		} else {
			console.log ("no " + listname + " found");
		}

		client.quit();
	});
}

if (inArray (listname, validLists)) {
	showlist (listname);
} else {
	console.log ("Error: '" + listname + "' is not a valid list name please use " + validLists);
}